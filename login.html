<!DOCTYPE HTML>
<html>
	<head>
		<title>Login - WebGPU Demonstration</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
        <style>
            #banner {
                background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("images/bg.png");
                background-position: center;
                background-size: cover;
                background-repeat: no-repeat;
            }

            /* 登录容器样式调整 */
            .login-container {
                max-width: 600px;
                width: 100%;
                margin: 0 auto;
            }
            
            /* 调整Label */
            .login-label {
                display: block;
                margin-bottom: 0.8rem;
                font-weight: bold;
                font-size: 1.25rem;
            }

            /* === 核心放大逻辑 === */
            #loginForm input[type="email"],
            #loginForm input[type="submit"] {
                font-size: 1.25rem;
                height: 4rem;
                padding-left: 1.5rem;
            }

            .login-stack > div {
                margin-bottom: 2rem;
            }
            
            .login-stack > div:last-child {
                margin-bottom: 0;
            }
        </style>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Banner (Login Section) -->
					<section id="banner" class="major">
						<div class="inner">
                            <div class="login-container">
                                
                                <!-- Login Form -->
                                <form id="loginForm" method="post" action="#">
                                    <div class="login-stack">
                                        
                                        <!-- 1. Email 输入框 -->
                                        <div class="field">
                                            <label for="email" class="login-label">Email for Login</label>
                                            <input type="email" name="email" id="email" placeholder="user@example.com" required />
                                        </div>

                                        <!-- 2. 登录按钮 -->
                                        <div class="actions">
                                            <input type="submit" value="Login" class="button primary fit" />
                                        </div>

                                    </div>
                                </form>
                            </div>
						</div>
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

            <!-- Login Logic Script (Updated with Node.js Logging) -->
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const loginForm = document.getElementById('loginForm');
                    
                    // 将函数改为 async 以便处理网络请求
                    loginForm.addEventListener('submit', async function(e) {
                        e.preventDefault();
                        const emailInput = document.getElementById('email');
                        const email = emailInput.value;
                        
                        if (email) {
                            const username = email.split('@')[0];
                            
                            // === 新增: 发送登录日志到 Node.js 后台 ===
                            try {
                                await fetch('http://localhost:3000/api/login', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({ username: username })
                                });
                                console.log('Login log sent to server');
                            } catch (error) {
                                console.error('Failed to send login log:', error);
                                // 即使日志发送失败，也不应阻止用户登录流程
                            }
                            // === 结束新增 ===

                            localStorage.setItem('portfolio_username', username);
                            window.location.href = 'index.html';
                        }
                    });
                });
            </script>

	</body>
</html>